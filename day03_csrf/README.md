# CSRF
跨域

邮件：白纸黑字
## 描述CSRF(夸站请求伪造)
![](./templates/CSRF攻击过程.png)

1. 用户c 登录网站a, 网站a校验登录成功之后,在session中记住了用户c的登录状态
2. 网站A返回应答给用户c时，让用户c保存一个cookie信息，比如名为sessionid(用户c浏览对应的session信息标识)
3. 用户c在没有退出网站a的情况下，使用了浏览器访问了另一个网站b
4. 网站b返回给用户c的浏览器一个页面，在这个页面上有链接地址d指向网站a的地址(此链接可能进行了伪装，吸引用户c的电击)
5. 用户c如果电击这个链接d, 则用户c的浏览器会指向网站a发起请求，同时会将sessionid发送网站a
6. 网站a认为是用户c之前登录的用户要执行操作，就会以用户c的身份做一些事情(比如转账和修改密码)

## 使用Flask实现web程序，定义视图实现一下功能
1. 从url地址中提取字符串
2. 从url地址中提取int参数
3. 获取客户端传递的查询字符串参数
4. 获取客户端传递的表单数据
5. 获取客户端传递的json数据
6. 响应时进行页面的重定向
7. 响应时返回json数据

## 涉及知识点:
- 使用路由转换器从url中提取参数(字符串和int)
- request对象的属性:
	args: 保存客户端传递的查询字符串数据;
	form: 保存客户端传递的表单类型数据;
	body: 保存客户端传递的请求体数据;
- 视图的响应:
	使用redirect进行页面重定向;
	使用jsonify返回json数据;

## 浏览器跨域请求防护
- 客户端验证,用户cookies中的scrf_token和表单域中的csrf_token时候相等，如果相等，则可以进行操作
- 客户每次get页面的时候都会刷新scrf_token的值,
- 第三方不能伪造出scrf_token的值
